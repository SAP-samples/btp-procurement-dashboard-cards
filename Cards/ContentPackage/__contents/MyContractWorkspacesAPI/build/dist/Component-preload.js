//@ui5-bundle sap/ariba/MyContractWorkspacesAPI/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"sap/ariba/MyContractWorkspacesAPI/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent"],function(e){"use strict";var a=e.extend("sap.ariba.MyContractWorkspacesAPI.Component",{onCardReady:function(e){this.card=e;e.getCombinedParameters();e.getManifestEntry("/sap.card")}});return a});
},
	"sap/ariba/MyContractWorkspacesAPI/Main.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(e,t,r){"use strict";return e.extend("sap.ariba.MyContractWorkspacesAPI.Main",{onInit:function(){this._initViewModel();var e=new t;this.getView().setModel(e,"contracts");e.refresh(true);this._getData()},_initViewModel:function(){var e=new t({busy:false});this.getView().setModel(e,"oViewModel")},_getDatePreviousXDays:function(e){var t=new Date;return new Date(t.setDate(t.getDate()-e)).toISOString().split("T")[0]},_getFilter:function(e){var t="";if(e){var r=this._getDatePreviousXDays(-1),a=this._getDatePreviousXDays(e);t="$filter=LastModified lt "+r+" and LastModified gt "+a}return t},handleRefreshButtonPressed:function(){this._getData()},_getData:function(e){this.getView().getModel("oViewModel").setProperty("/busy",true);var t=this.getOwnerComponent().card,a=t.getCombinedParameters();var s={sRealm:a.realm,sFilter:this._getFilter(a.lastXDays),sUser:a.user,sPasswordAdapter:a.passwordAdapter,iTop:a.searchResult};t.request({url:"{{destinations.wzcd}}/doGetMyRecentContractWorkspaces",dataType:"json",method:"POST",withCredentials:true,parameters:s,headers:{"Content-Type":"application/json"}}).then(function(e){var t=this.getView().getModel("contracts");t.setData(e);t.refresh(true);this.getView().getModel("oViewModel").setProperty("/busy",false)}.bind(this)).catch(function(e){this.getView().getModel("oViewModel").setProperty("/busy",false);r.error("There was an error in retrieving data: "+e)}.bind(this))},formatDate:function(e){return e&&e!=="1970-01-01T00:00:00Z"?e&&e.split("T")[0]:""},onListItemPress:function(e){var t=this.getOwnerComponent().card.getCombinedParameters().realm,r=this.getOwnerComponent().card.getCombinedParameters().datacenter,a=e.getSource().getBindingContext("contracts").getObject().ContractId;var s="https://"+r+".ariba.com/Sourcing/Main/ad/viewDocument?realm="+t+"&ID="+a;sap.m.URLHelper.redirect(s,true)}})});
},
	"sap/ariba/MyContractWorkspacesAPI/View.view.xml":'<mvc:View xmlns:core="sap.ui.core"\n          xmlns:mvc="sap.ui.core.mvc"\n          xmlns="sap.m"\n          xmlns:html="http://www.w3.org/1999/xhtml"\n          width="100%"\n          displayBlock="true"\n          controllerName="sap.ariba.MyContractWorkspacesAPI.Main"><Table items="{contracts>/value}" busy="{oViewModel>/busy}"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button\n                    tooltip="Refresh"\n                    icon="sap-icon://refresh"\n                    press="handleRefreshButtonPressed"/></OverflowToolbar></headerToolbar><columns><Column width="35%"><Text text="Contract" /></Column><Column><Text text="Owner" /></Column><Column><Text text="Supplier" /></Column><Column><Text text="Status" /></Column><Column><Text text="Creation Date" /></Column></columns><items><ColumnListItem\n                    type="Active"\n                    press="onListItemPress"><cells><ObjectIdentifier title="{contracts>ContractId}" text="{contracts>Title}" class="sapUiTinyMarginTopBottom" /><Text text="{contracts>Owner_UserId}" /><Text text="{contracts>Suppliers}" /><Text text="{contracts>ContractStatus}" /><Text text="{path: \'contracts>CreationDate_day\', formatter: \'.formatDate\'}" /></cells></ColumnListItem></items></Table></mvc:View>\n',
	"sap/ariba/MyContractWorkspacesAPI/dt/configuration.js":function(){sap.ui.define(["sap/ui/integration/Designtime"],function(a){"use strict";return function(){return new a({form:{items:{realm:{manifestpath:"/sap.card/configuration/parameters/realm/value",type:"string",translatable:false},datacenter:{manifestpath:"/sap.card/configuration/parameters/datacenter/value",type:"string",translatable:false},searchResult:{manifestpath:"/sap.card/configuration/parameters/searchResult/value",type:"integer",translatable:false},lastXDays:{manifestpath:"/sap.card/configuration/parameters/lastXDays/value",type:"integer",translatable:false},user:{manifestpath:"/sap.card/configuration/parameters/user/value",type:"string",translatable:false},passwordAdapter:{manifestpath:"/sap.card/configuration/parameters/passwordAdapter/value",type:"string",translatable:false}}},preview:{modes:"Abstract"}})}});
},
	"sap/ariba/MyContractWorkspacesAPI/manifest.json":'{"_version":"1.15.0","sap.app":{"id":"sap.ariba.MyContractWorkspacesAPI","type":"card","title":"My Contract Workspaces API","subTitle":"Recent contract workspaces live","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"phone":true,"tablet":true},"icons":{"icon":"sap-icon://technical-object"}},"sap.ui5":{"rootView":{"viewName":"sap.ariba.MyContractWorkspacesAPI.View","type":"XML","async":true,"id":"app"},"dependencies":{"minUI5Version":"1.38","libs":{"sap.m":{}}}},"sap.card":{"type":"Component","designtime":"dt/configuration","configuration":{"parameters":{"realm":{"value":"<realmName>","type":"string","label":"Realm","description":"The realm to connect to."},"datacenter":{"value":"s1","type":"string","label":"Datacenter","description":"The datacenter the realm belongs to (ie: s1 for us, s1-eu for eu...) "},"searchResult":{"value":5,"type":"integer","label":"Amount of Records displayed as the Search Result"},"lastXDays":{"value":10,"type":"integer","label":"Consider CWs modified in the last x days"},"user":{"value":"","type":"string","label":"User ID","description":"For Test purpose only"},"passwordAdapter":{"value":"PasswordAdapter1","type":"string","label":"Password Adapter for the SAP Ariba users"}},"destinations":{"wzcd":{"name":"Work-Zone-Cards-Data"}}},"header":{"title":"My Recent Procurement Contracts","subTitle":"From live SAP Ariba API","icon":{"src":"sap-icon://decision"}}},"sap.platform.mobilecards":{"compatible":false}}'
}});
